# 补充 TetrisGame 单元测试计划

## 现状分析
当前 TetrisGame.test.js 已覆盖以下测试：
- 方块旋转测试
- 碰撞检测测试
- 移动逻辑测试
- 消行测试
- 游戏初始化测试
- 特殊属性测试（包括爆炸属性）

## 缺失测试部分
1. **状态管理测试**：
   - FallingState 测试
   - ClearingState 测试
   - ReadyToSpawnState 测试

2. **核心功能测试**：
   - 游戏状态转换测试
   - 游戏结束逻辑测试
   - 急速下降测试
   - 砖块锁定测试
   - 爆炸效果完整流程测试

3. **测试结构优化**：
   - 按模块划分测试文件
   - 为状态类创建单独的测试文件
   - 增加集成测试

## 实施计划

### 1. 创建状态类测试文件
- `tests/states/FallingState.test.js`
- `tests/states/ClearingState.test.js`
- `tests/states/ReadyToSpawnState.test.js`

### 2. 补充核心功能测试
- 在 `TetrisGame.test.js` 中添加：
  - 游戏状态转换测试
  - 游戏结束逻辑测试
  - 急速下降测试
  - 砖块锁定测试
  - 爆炸效果完整流程测试

### 3. 优化测试结构
- 重构测试文件，按功能模块组织测试用例
- 统一测试命名规范
- 增加测试用例注释

### 4. 确保测试覆盖
- 验证所有核心功能都有对应的测试用例
- 确保测试用例的准确性和可靠性
- 运行测试确保通过

## 预期结果
通过补充测试，确保 TetrisGame 的所有核心功能都有良好的测试覆盖，提高代码质量和可维护性。